# เอกสารสรุปภาพรวมและโครงสร้างโปรเจกต์ (Product Requirements Document - PRD)

---

## 1. ชื่อโปรเจกต์

**DDProperty Platform** (ชื่อชั่วคราวตามโฟลเดอร์)

## 2. สรุปภาพรวม (Executive Summary)

โปรเจกต์ DDProperty คือแพลตฟอร์มเว็บไซต์ซื้อ-ขาย-เช่าอสังหาริมทรัพย์แบบครบวงจร (Full-featured Real Estate Platform) ที่ถูกออกแบบมาเพื่อตอบสนองตลาดในประเทศไทยเป็นหลัก แต่ก็รองรับการใช้งานหลายภาษา (Internationalization) เพื่อขยายฐานผู้ใช้ไปยังชาวต่างชาติ ประกอบด้วย 2 ส่วนหลักคือ:

*   **Frontend (ddproperty_project):** เว็บไซต์สำหรับผู้ใช้งานทั่วไปและนายหน้า (Agent) สร้างด้วยเทคโนโลยี **Next.js** ที่ทันสมัย เน้นประสบการณ์การใช้งานที่ดี (UX) การแสดงผลที่รวดเร็ว และรองรับการใช้งานบนทุกอุปกรณ์ (Responsive Design)
*   **Backend (backendDD_property):** ระบบหลังบ้านที่แข็งแกร่งและปลอดภัย สร้างด้วย **Node.js และ Express** ทำหน้าที่เป็น API Server สำหรับจัดการข้อมูลทั้งหมดของระบบ ตั้งแต่ข้อมูลผู้ใช้, ทรัพย์สิน, ไปจนถึงการประมวลผลทางธุรกิจ

**เป้าหมายหลัก:** เพื่อสร้างแพลตฟอร์มศูนย์กลางสำหรับอสังหาริมทรัพย์ที่ใช้งานง่าย, น่าเชื่อถือ, และมีฟีเจอร์ที่ตอบโจทย์ทั้งผู้ซื้อ, ผู้ขาย, และนายหน้าอสังหาริมทรัพย์

## 3. โครงสร้างทางเทคนิค (Technical Architecture)

### 3.1. Frontend (ddproperty_project - Next.js)

*   **Framework:** **Next.js 14+** (ใช้ App Router) ซึ่งเป็น React Framework ที่เน้นประสิทธิภาพและความเร็วในการโหลด
*   **ภาษา:** JavaScript (ES6+)
*   **การจัดการ State:** **Zustand** เป็นตัวจัดการ State หลัก ทำให้โค้ดกระชับและจัดการง่าย
*   **การออกแบบและ UI:**
    *   **Bootstrap** และ **Sass (.scss)** สำหรับโครงสร้างและสไตล์ที่ปรับแต่งได้สูง
    *   **React Icons, Swiper, AOS:** สำหรับสร้าง UI ที่สวยงามและมี Animation
    *   **React Beautiful DnD:** สำหรับฟังก์ชันลากและวาง (Drag and Drop) ในส่วนจัดการรูปภาพ
*   **ฟอร์ม:** **React Hook Form** และ **Yup** สำหรับการจัดการและตรวจสอบความถูกต้องของข้อมูลในฟอร์ม
*   **การเชื่อมต่อ API:** **Axios** สำหรับการเรียกใช้ API จากฝั่ง Backend
*   **การรองรับหลายภาษา (i18n):** **`next-intl`** สำหรับจัดการเนื้อหาในภาษาต่างๆ (อังกฤษ, ไทย, จีน, รัสเซีย)
*   **แผนที่:** **`@react-google-maps/api`** สำหรับแสดงผลแผนที่ Google Maps
*   **การแจ้งเตือน:** **React Hot Toast / SweetAlert2** สำหรับแสดงข้อความแจ้งเตือนผู้ใช้

### 3.2. Backend (backendDD_property - Node.js)

*   **Framework:** **Express.js** บน **Node.js** (v18+) เป็น Web Server ที่มีความยืดหยุ่นสูง
*   **ภาษา:** JavaScript (ES6+)
*   **การจัดการฐานข้อมูล:**
    *   **ฐานข้อมูล:** **MySQL**
    *   **ORM (Object-Relational Mapping):** **Prisma** เป็นเครื่องมือหลักในการเชื่อมต่อและจัดการฐานข้อมูล ทำให้การเขียน Query ทำได้ง่ายและปลอดภัย
*   **การยืนยันตัวตน (Authentication):** **JSON Web Tokens (JWT)** และ **Bcrypt** สำหรับการเข้ารหัสรหัสผ่าน
*   **การจัดการไฟล์:** **Multer** สำหรับจัดการการอัปโหลดไฟล์รูปภาพของอสังหาริมทรัพย์
*   **ความปลอดภัย:** **Helmet** และ **CORS** เพื่อเพิ่มความปลอดภัยให้กับ API
*   **API Structure:** RESTful API ที่มีโครงสร้างชัดเจน แบ่งตามหน้าที่ (Routes, Controllers, Services, Repositories)

## 4. โครงสร้างฐานข้อมูล (Database Schema - MySQL via Prisma)

ฐานข้อมูลถูกออกแบบมาอย่างละเอียดและครอบคลุมการใช้งานจริงของเว็บอสังหาริมทรัพย์:

*   **ตารางหลัก (Core Tables):**
    *   `User`: เก็บข้อมูลผู้ใช้, บทบาท (Admin, Agent, User), และข้อมูลติดต่อ
    *   `Property`: **หัวใจของระบบ** เก็บข้อมูลอสังหาริมทรัพย์ทั้งหมด เช่น ที่อยู่, ประเภท, ขนาด, จำนวนห้อง, รายละเอียดหลายภาษา, และข้อมูลเชิงลึกอื่นๆ
    *   `PropertyListing`: ตารางสำหรับ "ประกาศ" ทำให้ 1 ทรัพย์สินสามารถมีได้ทั้งประกาศขายและเช่าพร้อมกัน โดยมีราคาและเงื่อนไขที่แตกต่างกันได้
*   **ตารางเสริม (Supporting Tables):**
    *   `Zone`, `TypeProperty`: สำหรับการจัดหมวดหมู่เพื่อให้ง่ายต่อการค้นหาและฟิลเตอร์
    *   `PropertyImage`, `FloorPlan`, `UnitPlan`: สำหรับเก็บรูปภาพประเภทต่างๆ ของทรัพย์สิน
    *   `PropertyFeature`, `PropertyAmenity`, `PropertyFacility`, `PropertyView`, `PropertyHighlight`: ตารางสำหรับเก็บคุณสมบัติพิเศษต่างๆ ของทรัพย์สิน ทำให้ระบบมีความยืดหยุ่นสูงในการเพิ่ม/ลดคุณสมบัติต่างๆ
    *   `Message`: สำหรับเก็บข้อความที่ผู้สนใจส่งเข้ามาติดต่อในแต่ละประกาศ
    *   `CurrencyRate`: สำหรับจัดการอัตราแลกเปลี่ยนสกุลเงินต่างๆ

## 5. สรุปฟังก์ชันการทำงานหลัก (Key Features)

*   **ระบบค้นหาและกรองข้อมูล (Advanced Search):** ผู้ใช้สามารถค้นหาอสังหาริมทรัพย์ตามเงื่อนไขต่างๆ ได้อย่างละเอียด เช่น ประเภท, ราคา, โซนที่ตั้ง, จำนวนห้องนอน/ห้องน้ำ
*   **ระบบจัดการอสังหาริมทรัพย์ (Property Management):** สำหรับนายหน้า/เจ้าของ สามารถเพิ่ม, แก้ไข, ลบ ประกาศของตนเองได้
    *   รองรับการอัปโหลดรูปภาพหลายประเภท (ภาพรวม, แปลนห้อง, แปลนยูนิต)
    *   มีฟังก์ชันจัดการลำดับรูปภาพแบบ Drag and Drop
    *   กรอกข้อมูลได้หลายภาษา พร้อมระบบช่วยแปลอัตโนมัติ
*   **หน้าแสดงรายละเอียดทรัพย์สิน (Property Detail Page):** แสดงข้อมูลครบถ้วน, แกลเลอรีรูปภาพ, แผนที่, และฟอร์มสำหรับติดต่อผู้ลงประกาศ
*   **ระบบสมาชิกและบทบาท (User & Roles):** รองรับผู้ใช้ 3 ระดับ คือ ผู้ใช้ทั่วไป, นายหน้า, และผู้ดูแลระบบ
*   **เว็บไซต์หลายภาษา (Multi-language Support):** รองรับ 4 ภาษาหลัก (EN, TH, CH, RU) เพื่อเข้าถึงกลุ่มลูกค้าที่หลากหลาย
